{% extends "blog/base_generic.html" %}
{% load i18n %}
{% load static %}

{% block content %}


<div class="container">

    <p>
    <form class="d-flex row justify-content-center gap-sm-2" method="GET">
        <div class="col-7 col-sm-4 p-0">
            {{ filter_form.search }}
        </div>
        <div class="col-3 col-sm-2 p-0">
            {{ filter_form.year }}
        </div>
        <div class="col-10 col-sm-2 p-0">
            <button class="btn btn-primary w-100" type="submit">{% trans "Search" %}</button>
        </div>
    </form>
    <p>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
    {% if blog_posts %}
    {% for cover in blog_posts %}
    <div class="col d-flex justify-content-center flex-wrap flex-column">
            <div class="image-container text-center mx-auto" style="width: 170px; height: 255px;" >
                {% if user.is_authenticated %}
                    {% if cover.type.type == 'Brochures' or cover.type.type == 'Other papers' %}
                        <a href="{{ cover.file.url }}" target="_blank">
                    {% else %}
                        <a href="{{ cover.get_absolute_url }}">
                    {% endif %}
                {% else %}
                    <a href="{{ cover.get_absolute_url }}">
                {% endif %}
                        <img src="{{ cover.banner.url }}" alt="..." >
                    </a>
            </div>
            <div class="text-center">
                {% if user.is_authenticated %}
                    {% if cover.type.type in others %}
                        <a class="text-decoration-none" href="{{ cover.file.url }}" target="_blank">
                    {% else %}
                        <a class="text-decoration-none" href="{{ cover.get_absolute_url }}">
                    {% endif %}
                {% else %}
                    <a class="text-decoration-none" href="{{ cover.get_absolute_url }}">
                {% endif %}
                    <p class="text">
                        {% if CURRENT_LANGUAGE == "uk" %}
                            {{ cover.uk_title }}
                        {% else %}
                            {{ cover.en_title }}
                        {% endif %}
                    </p>
                </a>
            </div>
    </div>
    {% endfor %}
    {% else %}
    <p>{% trans "There are no resources matching your request" %}</p>
    {% endif %}
  </div>

    {% include 'include/pagination.html' %}

</div>
{% endblock %}